# Install Swift
cd "$BUILD_DIR"

echo "Swift 3 Heroku Installer";

# Determine version
VERSION="3.0.2"
if [ -f "$BUILD_DIR/.swift-version" ]
then
    VERSION_FILE=".swift-version"
    VERSION=`cat $VERSION_FILE | tr -d '[[:space:]]'`
elif ! [ -z "$SWIFT_VERSION" ]
then
    VERSION="$SWIFT_VERSION"
fi

echo "ğŸ”¢  Version: $VERSION";

# Determine OS
UBUNTU_RELEASE=`lsb_release -a 2>/dev/null`;
if [[ $UBUNTU_RELEASE == *"15.10"* ]];
then
    OS="ubuntu1510";
else
    OS="ubuntu1404";
fi
echo "ğŸ–¥  Operating System: $OS";


echo "ğŸ“¦ Installing Swiftenv"
git clone --depth 1 https://github.com/kylef/swiftenv.git ~/.swiftenv
export SWIFTENV_ROOT="$HOME/.swiftenv"
export PATH="$SWIFTENV_ROOT/bin:$SWIFTENV_ROOT/shims:$PATH"

# echo "ğŸ“š Installing Dependencies"

echo "ğŸ¦ Installing Swift";
swiftenv install $VERSION;

echo "âœ…  Done";
